import{f as m,a as u,s as l}from"../chunks/DiffSbHz.js";import"../chunks/_slrglhF.js";import{p as ut,t as A,a as mt,c as a,r,s as p,u as o,d as H,g as s,h as gt,n as yt}from"../chunks/CEDcyOYW.js";import{i as R}from"../chunks/C6Av-WmO.js";import{e as _t,i as ht}from"../chunks/BHfjgp9A.js";import{s as bt}from"../chunks/DesLxErO.js";import{s as wt}from"../chunks/DX638qa3.js";import{i as $t}from"../chunks/DDcHbUog.js";import{a as Dt,s as kt}from"../chunks/DWJ8Ji1n.js";import{p as It}from"../chunks/D7-I8OqS.js";import{e as J}from"../chunks/BOqsd6nz.js";import{m as K}from"../chunks/D4TrUI55.js";import{a as L,d as O}from"../chunks/Cfxaq3mp.js";import{b as Mt}from"../chunks/_3cAh_Kk.js";var Nt=m('<th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Budget</th> <th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Revenue</th>',1),At=m('<td class="px-4 py-2 whitespace-nowrap text-gray-600"> </td> <td class="px-4 py-2 whitespace-nowrap text-gray-600"> </td>',1),Rt=m('<tr class="hover:bg-gray-50"><td class="px-4 py-2 whitespace-nowrap"><a class="text-blue-600 hover:text-blue-800 font-medium"> </a></td><td class="px-4 py-2 whitespace-nowrap text-gray-600"> </td><td class="px-4 py-2 whitespace-nowrap"><span> </span></td><td class="px-4 py-2 whitespace-nowrap text-gray-600"> </td><!></tr>'),Ft=m('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-100"><tr><th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Movie</th><th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Year</th><th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Role</th><th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Runtime</th><!></tr></thead><tbody class="bg-white divide-y divide-gray-100"></tbody></table></div>'),Ut=m('<div class="text-center py-8"><p class="text-gray-500">No movies found for this person.</p></div>'),qt=m('<div class="py-10"><div class="max-w-6xl mx-auto bg-white rounded-xl shadow-md p-8"><h1 class="text-4xl font-bold text-gray-800 mb-6"> </h1> <div class="mb-6"><p class="text-lg text-gray-600"> </p></div> <!></div></div>');function Vt(Q,T){var Y,j;ut(T,!1);const[V,W]=kt(),f=parseInt(Dt(It,"$page",V).params.id);isNaN(f)&&J(400,"Invalid person ID");const F=L.filter(t=>t.person_id===f).map(t=>{const i=K.find(n=>n.id===t.movie_id);return i?{...i,role:"Actor"}:null}).filter(t=>t!==null),U=O.filter(t=>t.person_id===f).map(t=>{const i=K.find(n=>n.id===t.movie_id);return i?{...i,role:"Director"}:null}).filter(t=>t!==null),v=[...F,...U].filter((t,i,n)=>i===n.findIndex(d=>d&&d.id===t.id)),q=((Y=L.find(t=>t.person_id===f))==null?void 0:Y.name)||((j=O.find(t=>t.person_id===f))==null?void 0:j.name);q||J(404,`Person with ID ${f} not found`);function S(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function B(t){const i=F.some(d=>d.id===t),n=U.some(d=>d.id===t);return i&&n?"Actor, Director":i?"Actor":n?"Director":"Unknown"}$t();var y=qt(),C=a(y),_=a(C),X=a(_,!0);r(_);var h=p(_,2),P=a(h),Z=a(P);r(P),r(h);var tt=p(h,2);{var et=t=>{var i=Ft(),n=a(i),d=a(n),z=a(d),at=p(a(z),4);{var st=c=>{var e=Nt();yt(2),u(c,e)};R(at,c=>{o(()=>v.some(e=>e.budget>0||e.revenue>0))&&c(st)})}r(z),r(d);var E=p(d);_t(E,5,()=>o(()=>v.sort((c,e)=>e.year-c.year)),ht,(c,e)=>{var b=Rt(),w=a(b),$=a(w),it=a($,!0);r($),r(w);var D=p(w),ot=a(D,!0);r(D);var k=p(D),I=a(k),nt=a(I,!0);r(I),r(k);var M=p(k),dt=a(M);r(M);var pt=p(M);{var lt=g=>{var x=At(),N=gt(x),ct=a(N,!0);r(N);var G=p(N,2),xt=a(G,!0);r(G),A((ft,vt)=>{l(ct,ft),l(xt,vt)},[()=>(s(e),o(()=>s(e).budget>0?S(s(e).budget):"-")),()=>(s(e),o(()=>s(e).revenue>0?S(s(e).revenue):"-"))],H),u(g,x)};R(pt,g=>{o(()=>v.some(x=>x.budget>0||x.revenue>0))&&g(lt)})}r(b),A((g,x)=>{bt($,"href",`${Mt??""}/movie/${s(e),o(()=>s(e).id)??""}`),l(it,(s(e),o(()=>s(e).name))),l(ot,(s(e),o(()=>s(e).year))),wt(I,1,`inline-flex px-2 py-1 text-xs font-semibold rounded-full 
                    ${g??""}`),l(nt,x),l(dt,`${s(e),o(()=>s(e).runtime)??""} min`)},[()=>(s(e),o(()=>B(s(e).id).includes("Director")?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800")),()=>(s(e),o(()=>B(s(e).id)))],H),u(c,b)}),r(E),r(n),r(i),u(t,i)},rt=t=>{var i=Ut();u(t,i)};R(tt,t=>{o(()=>v.length>0)?t(et):t(rt,!1)})}r(C),r(y),A(()=>{l(X,q),l(Z,`${o(()=>v.length)??""} movie${o(()=>v.length!==1?"s":"")??""} in the collection`)}),u(Q,y),mt(),W()}export{Vt as component};
