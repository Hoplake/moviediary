import{f as c,a as p,s as x,e as qt}from"../chunks/cBq-ohnL.js";import"../chunks/COK-7Bwt.js";import{p as zt,t as g,a as Ut,c as o,s as d,r as a,u as n,g as s,m as jt,d as at,h as Bt,f as Pt,n as Ct}from"../chunks/DqzcrQiP.js";import{i as h}from"../chunks/DcRTBZQz.js";import{e as Yt,i as Et}from"../chunks/B1R7E2ux.js";import{s as D}from"../chunks/DYolmTxR.js";import{s as st,c as Gt}from"../chunks/Yz2bDJui.js";import{i as Ht}from"../chunks/T0XUoNZi.js";import{a as Jt,s as Kt}from"../chunks/C_SZ09rI.js";import{p as Lt}from"../chunks/0BXljoH7.js";import{e as ot}from"../chunks/Dg7E9prf.js";import{m as it}from"../chunks/D6YDXgTv.js";import{a as $,d as N,R as Ot}from"../chunks/DnjE-69-.js";import{b as nt}from"../chunks/C4aErw1F.js";var Qt=c('<img class="w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-md mb-4"/>'),Tt=c('<img alt="No photo" class="w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-md mb-4"/>'),Vt=c('<button class="ml-2 text-blue-600 hover:underline text-sm font-medium"> </button>'),Wt=c('<div class="max-w-2xl text-center text-gray-700 mb-4"><span> </span> <!></div>'),Xt=c('<div class="max-w-2xl text-center text-gray-400 mb-4 italic">No biography available.</div>'),Zt=c('<th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Budget</th> <th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Revenue</th>',1),te=c('<td class="px-4 py-2 whitespace-nowrap text-gray-600"> </td> <td class="px-4 py-2 whitespace-nowrap text-gray-600"> </td>',1),ee=c('<tr class="hover:bg-gray-50"><td class="px-4 py-2 whitespace-nowrap"><a class="text-blue-600 hover:text-blue-800 font-medium"> </a></td><td class="px-4 py-2 whitespace-nowrap text-gray-600"> </td><td class="px-4 py-2 whitespace-nowrap"><span> </span></td><td class="px-4 py-2 whitespace-nowrap"><!></td><td class="px-4 py-2 whitespace-nowrap text-gray-600"> </td><!></tr>'),re=c('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-100"><tr><th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Movie</th><th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Year</th><th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Role</th><th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Rating</th><th class="px-4 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Runtime</th><!></tr></thead><tbody class="bg-white divide-y divide-gray-100"></tbody></table></div>'),ae=c('<div class="text-center py-8"><p class="text-gray-500">No movies found for this person.</p></div>'),se=c('<div class="py-10"><div class="max-w-6xl mx-auto bg-white rounded-xl shadow-md p-8"><div class="flex flex-col items-center mb-6"><!> <h1 class="text-4xl font-bold text-gray-800 mb-2"> </h1> <div class="text-gray-600 text-lg mb-2"> </div> <!></div> <!></div></div>');function ye(dt,lt){var V,W,X,Z,tt,et;zt(lt,!1);const[pt,ct]=Kt(),v=parseInt(Jt(Lt,"$page",pt).params.id);isNaN(v)&&ot(400,"Invalid person ID");const H=$.filter(t=>t.person_id===v).map(t=>{const e=it.find(i=>i.id===t.movie_id);return e?{...e,role:"Actor"}:null}).filter(t=>t!==null),J=N.filter(t=>t.person_id===v).map(t=>{const e=it.find(i=>i.id===t.movie_id);return e?{...e,role:"Director"}:null}).filter(t=>t!==null),_=[...H,...J].filter((t,e,i)=>e===i.findIndex(l=>l&&l.id===t.id)),R=((V=$.find(t=>t.person_id===v))==null?void 0:V.name)||((W=N.find(t=>t.person_id===v))==null?void 0:W.name),K=((X=$.find(t=>t.person_id===v))==null?void 0:X.profile_path)||((Z=N.find(t=>t.person_id===v))==null?void 0:Z.profile_path),I=((tt=$.find(t=>t.person_id===v))==null?void 0:tt.biography)||((et=N.find(t=>t.person_id===v))==null?void 0:et.biography)||"";let w=jt(!1);R||ot(404,`Person with ID ${v} not found`);function L(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function O(t){const e=H.some(l=>l.id===t),i=J.some(l=>l.id===t);return e&&i?"Actor, Director":e?"Actor":i?"Director":"Unknown"}Ht();var M=se(),Q=o(M),A=o(Q),T=o(A);{var vt=t=>{var e=Qt();g(()=>{D(e,"src",`https://image.tmdb.org/t/p/w300${K}`),D(e,"alt",R)}),p(t,e)},xt=t=>{var e=Tt();g(()=>D(e,"src",`${nt??""}/default-avatar.png`)),p(t,e)};h(T,t=>{K?t(vt):t(xt,!1)})}var F=d(T,2),ft=o(F,!0);a(F);var S=d(F,2),ut=o(S);a(S);var mt=d(S,2);{var gt=t=>{var e=Wt(),i=o(e),l=o(i,!0);a(i);var k=d(i,2);{var q=b=>{var u=Vt(),f=o(u,!0);a(u),g(()=>x(f,s(w)?"Show less":"Show more")),qt("click",u,()=>Pt(w,!s(w))),p(b,u)};h(k,b=>{n(()=>I.length>200)&&b(q)})}a(e),g(()=>{st(i,1,Gt(s(w)?"":"bio-truncate"),"svelte-1dzqw2z"),x(l,I)}),p(t,e)},_t=t=>{var e=Xt();p(t,e)};h(mt,t=>{I?t(gt):t(_t,!1)})}a(A);var ht=d(A,2);{var bt=t=>{var e=re(),i=o(e),l=o(i),k=o(l),q=d(o(k),5);{var b=f=>{var r=Zt();Ct(2),p(f,r)};h(q,f=>{n(()=>_.some(r=>r.budget>0||r.revenue>0))&&f(b)})}a(k),a(l);var u=d(l);Yt(u,5,()=>n(()=>_.sort((f,r)=>r.year-f.year)),Et,(f,r)=>{var z=ee(),U=o(z),j=o(U),wt=o(j,!0);a(j),a(U);var B=d(U),kt=o(B,!0);a(B);var P=d(B),C=o(P),Dt=o(C,!0);a(C),a(P);var Y=d(P),$t=o(Y);Ot($t,{get rating(){return s(r),n(()=>s(r).rating)},size:"sm",showNumber:!0}),a(Y);var E=d(Y),Nt=o(E);a(E);var Rt=d(E);{var It=y=>{var m=te(),G=Bt(m),Mt=o(G,!0);a(G);var rt=d(G,2),At=o(rt,!0);a(rt),g((Ft,St)=>{x(Mt,Ft),x(At,St)},[()=>(s(r),n(()=>s(r).budget>0?L(s(r).budget):"-")),()=>(s(r),n(()=>s(r).revenue>0?L(s(r).revenue):"-"))],at),p(y,m)};h(Rt,y=>{n(()=>_.some(m=>m.budget>0||m.revenue>0))&&y(It)})}a(z),g((y,m)=>{D(j,"href",`${nt??""}/movie/${s(r),n(()=>s(r).id)??""}`),x(wt,(s(r),n(()=>s(r).name))),x(kt,(s(r),n(()=>s(r).year))),st(C,1,`inline-flex px-2 py-1 text-xs font-semibold rounded-full 
                    ${y??""}`),x(Dt,m),x(Nt,`${s(r),n(()=>s(r).runtime)??""} min`)},[()=>(s(r),n(()=>O(s(r).id).includes("Director")?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800")),()=>(s(r),n(()=>O(s(r).id)))],at),p(f,z)}),a(u),a(i),a(e),p(t,e)},yt=t=>{var e=ae();p(t,e)};h(ht,t=>{n(()=>_.length>0)?t(bt):t(yt,!1)})}a(Q),a(M),g(()=>{x(ft,R),x(ut,`${n(()=>_.length)??""} movie${n(()=>_.length!==1?"s":"")??""} in the collection`)}),p(dt,M),Ut(),ct()}export{ye as component};
